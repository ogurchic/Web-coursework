<template>
  <section class="portfolio-page container-fluid text-white py-5">
    <div class="row">
      <!-- Sidebar -->
      <div class="col-md-3 mb-4 mb-md-0">
        <div class="list-group">
          <button
            v-for="(cat, index) in categories"
            :key="index"
            class="list-group-item list-group-item-action"
            :class="{ active: activeCategory === cat }"
            @click="selectCategory(cat)"
          >
            {{ cat }}
          </button>
        </div>
      </div>

      <!-- Gallery -->
      <div class="col-md-9">
        <div class="row">
          <div
            v-for="(photo, index) in filteredPhotos"
            :key="index"
            class="col-12 col-sm-6 col-md-4 mb-4 d-flex justify-content-center"
          >
            <img :src="photo.src" :alt="photo.alt" class="gallery-image img-fluid" />
          </div>
        </div>
      </div>
    </div>
  </section>
</template>

<script setup>
import { ref, computed, onMounted, watch } from 'vue'
import { useRoute, useRouter } from 'vue-router'

const route = useRoute()
const router = useRouter()

const categories = ['–°–µ–º–µ–π–Ω—ã–µ', '–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ', '–î–æ–∫—É–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ']
const activeCategory = ref('–°–µ–º–µ–π–Ω—ã–µ')

// ‚úÖ –°—á–∏—Ç—ã–≤–∞–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä –∏–∑ URL –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
onMounted(() => {
  const categoryFromQuery = route.query.category
  if (categories.includes(categoryFromQuery)) {
    activeCategory.value = categoryFromQuery
  }
})

// üîÅ –°–ª–µ–∂–µ–Ω–∏–µ –∑–∞ URL ‚Äî –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—Ä—É—á–Ω—É—é –º–µ–Ω—è–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä
watch(() => route.query.category, (newVal) => {
  if (categories.includes(newVal)) {
    activeCategory.value = newVal
  }
})

// üîÅ –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—é –æ–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ URL
const selectCategory = (cat) => {
  activeCategory.value = cat
  router.push({ path: '/portfolio', query: { category: cat } })
}

// üì∏ –ò–º–ø–æ—Ä—Ç —Ñ–æ—Ç–æ

// –°–µ–º–µ–π–Ω—ã–µ
import photo1f from '@/assets/photo1f.jpg'
import photo2f from '@/assets/photo2f.jpg'
import photo3f from '@/assets/photo3f.jpg'
import photo4f from '@/assets/photo4f.jpg'
import photo5f from '@/assets/photo5f.jpg'
import photo6f from '@/assets/photo6f.jpg'

// –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ
import photo1i from '@/assets/photo1i.jpg'
import photo2i from '@/assets/photo2i.jpg'
import photo3i from '@/assets/photo3i.jpg'
import photo4i from '@/assets/photo4i.jpg'
import photo5i from '@/assets/photo5i.jpg'
import photo6i from '@/assets/photo6i.jpg'

// –î–æ–∫—É–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ
import photo1d from '@/assets/photo1d.jpg'
import photo2d from '@/assets/photo2d.jpg'
import photo3d from '@/assets/photo3d.jpg'
import photo4d from '@/assets/photo4d.jpg'
import photo5d from '@/assets/photo5d.jpg'
import photo6d from '@/assets/photo6d.jpg'

const photos = [
  { src: photo1f, alt: '–°–µ–º–µ–π–Ω—ã–µ', category: '–°–µ–º–µ–π–Ω—ã–µ' },
  { src: photo2f, alt: '–°–µ–º–µ–π–Ω—ã–µ', category: '–°–µ–º–µ–π–Ω—ã–µ' },
  { src: photo3f, alt: '–°–µ–º–µ–π–Ω—ã–µ', category: '–°–µ–º–µ–π–Ω—ã–µ' },
  { src: photo4f, alt: '–°–µ–º–µ–π–Ω—ã–µ', category: '–°–µ–º–µ–π–Ω—ã–µ' },
  { src: photo5f, alt: '–°–µ–º–µ–π–Ω—ã–µ', category: '–°–µ–º–µ–π–Ω—ã–µ' },
  { src: photo6f, alt: '–°–µ–º–µ–π–Ω—ã–µ', category: '–°–µ–º–µ–π–Ω—ã–µ' },

  { src: photo1i, alt: '–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ', category: '–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ' },
  { src: photo2i, alt: '–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ', category: '–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ' },
  { src: photo3i, alt: '–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ', category: '–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ' },
  { src: photo4i, alt: '–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ', category: '–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ' },
  { src: photo5i, alt: '–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ', category: '–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ' },
  { src: photo6i, alt: '–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ', category: '–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ' },

  { src: photo1d, alt: '–î–æ–∫—É–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ', category: '–î–æ–∫—É–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ' },
  { src: photo2d, alt: '–î–æ–∫—É–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ', category: '–î–æ–∫—É–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ' },
  { src: photo3d, alt: '–î–æ–∫—É–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ', category: '–î–æ–∫—É–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ' },
  { src: photo4d, alt: '–î–æ–∫—É–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ', category: '–î–æ–∫—É–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ' },
  { src: photo5d, alt: '–î–æ–∫—É–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ', category: '–î–æ–∫—É–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ' },
  { src: photo6d, alt: '–î–æ–∫—É–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ', category: '–î–æ–∫—É–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ' },
]

const filteredPhotos = computed(() =>
  photos.filter((photo) => photo.category === activeCategory.value)
)
</script>


<style scoped>
.portfolio-page {
  background-color: #10332a;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  padding-top: 80px; 
}

.row {
  flex: 1;
  display: flex;
}

/* Sidebar: —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∏ –ø–æ —Ü–µ–Ω—Ç—Ä—É –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ */
.col-md-3 {
  position: fixed;
  top: 50%;
  left: 0;
  transform: translateY(-50%);
  height: auto;
  width: 250px;
  padding-right: 1rem;
  border-right: 1px solid rgba(255, 255, 255, 0.2);
}

/* –ö–æ–Ω—Ç–µ–Ω—Ç –æ—Ç–æ–¥–≤–∏–≥–∞–µ—Ç—Å—è –ø—Ä–∞–≤–µ–µ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –±–æ–∫–æ–≤–æ–π */
.col-md-9 {
  margin-left: 250px;
  padding-left: 1rem;
  border-left: 1px solid rgba(255, 255, 255, 0.2);
}

/* –ö–∞—Ä—Ç–∏–Ω–∫–∏ */
.gallery-image {
  width: 100%;
  max-width: 300px;
  height: 400px;
  object-fit: cover;
  border: 1px solid #ccc;
}

/* –ö–Ω–æ–ø–∫–∏ */
.list-group-item {
  background-color: transparent;
  color: white;
  font-size: 1.3rem;
  font-stretch: condensed;
  border: none;
  transition: all 0.3s;
  font-family: 'Roboto Condensed', sans-serif;
}

.list-group-item:hover {
  background-color: rgba(255, 255, 255, 0.05);
}

.list-group-item.active {
  background-color: rgba(255, 255, 255, 0.1);
  font-weight: bold;
  font-size: 1.5rem;
}

</style>
